import std::io::{println}

glo Cat = do {
    meow_times = 0
    play_times = 0

    fn new() {
        obj = {}
        obj[#] = {
            "__getattr__": fn(self, key) {
                if self[key] != null {
                    return self[key]
                }
                return Cat[key]
            }
        }
        return obj
    }

    fn meow(self) {
        self.meow_times += 1
        println("meow~")
        return self
    }

    fn play(self) {
        self.play_times += 1
        println("Playing...")
        return self
    }
}

cat = Cat::new()
cat = cat.meow()
cat = cat.play()
cat = cat.meow()

assert(cat.meow_times == 2)
assert(cat.play_times == 1)
